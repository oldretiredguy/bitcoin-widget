<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BTC → AUD</title>
  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
    body { margin: 0; background:#0b0f14; color:#e8eef5; display:grid; place-items:center; height:100vh; }
    .card { padding:24px 28px; border-radius:18px; background:#121923; box-shadow:0 10px 30px rgba(0,0,0,.35); min-width:320px; }
    .row { display:flex; align-items:baseline; gap:12px; }
    .label { opacity:.7; letter-spacing:.2px; }
    .price { font-size:2.4rem; font-weight:700; }
    .delta { font-variant-numeric: tabular-nums; opacity:.9; }
    .muted { opacity:.6; font-size:.9rem; margin-top:10px; }
  </style>
</head>
<body>
  <div class="card">
    <div class="row">
      <div class="label">Bitcoin</div>
      <div class="muted">BTC → AUD</div>
    </div>
    <div class="row" style="margin-top:6px;">
      <div id="price" class="price">—</div>
      <div id="delta" class="delta">…</div>
    </div>
    <div class="muted" id="when">Updating…</div>
  </div>

  <script>
    const fmt = new Intl.NumberFormat('en-AU', { style: 'currency', currency: 'AUD', maximumFractionDigits: 0 });
    let last = null;

    async function fetchPrice() {
      try {
        // CoinGecko free endpoint; light and CORS-friendly
        const r = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=aud');
        const d = await r.json();
        const p = d?.bitcoin?.aud;
        if (!p) throw new Error('No price');

        const priceEl = document.getElementById('price');
        const deltaEl = document.getElementById('delta');
        const whenEl  = document.getElementById('when');

        priceEl.textContent = fmt.format(p);

        if (last !== null) {
          const diff = p - last;
          const pct  = (diff / last) * 100;
          const sign = diff >= 0 ? '+' : '';
          deltaEl.textContent = `${sign}${pct.toFixed(2)}%`;
          deltaEl.style.color = diff >= 0 ? '#47d16a' : '#ff6b6b';
        } else {
          deltaEl.textContent = '—';
          deltaEl.style.color = '#e8eef5';
        }

        last = p;
        const t = new Date();
        whenEl.textContent = `Updated ${t.toLocaleTimeString('en-AU')}`;
      } catch (e) {
        document.getElementById('when').textContent = 'Update failed. Retrying…';
      }
    }

    fetchPrice();
    setInterval(fetchPrice, 30_000);
  </script>
</body>
</html>
